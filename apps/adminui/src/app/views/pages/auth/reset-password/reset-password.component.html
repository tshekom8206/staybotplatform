<div class="login-page-wrapper">
  <div class="cards-container">
    <!-- Left Card - Reset Password Form -->
    <div class="login-card">
      <div class="login-form-wrapper">
        <!-- Logo -->
        <div class="logo-section">
          <div class="logo-container">
            <div class="logo-icon">
              <span>üè®</span>
            </div>
            <span class="logo-text"
              >STAY<span class="logo-accent">BOT</span></span
            >
          </div>
        </div>

        <!-- Title -->
        <div class="welcome-section" *ngIf="!success">
          <h1 class="welcome-title">Set New Password</h1>
          <p class="welcome-description">
            Please enter your new password below. Make sure it's secure and easy for you to remember.
          </p>
        </div>

        <!-- Form -->
        <form
          [formGroup]="resetPasswordForm"
          (ngSubmit)="onSubmit()"
          class="login-form"
          *ngIf="!success"
        >
          <!-- Password Field -->
          <div class="form-group">
            <label for="password" class="form-label">New Password</label>
            <div class="input-group">
              <div class="input-icon">
                <i class="feather icon-lock"></i>
              </div>
              <input
                [type]="showPassword ? 'text' : 'password'"
                id="password"
                formControlName="password"
                autocomplete="new-password"
                class="form-control modern-input"
                placeholder="Enter new password"
              />
              <div class="input-icon-right" (click)="togglePasswordVisibility()">
                <i [class]="showPassword ? 'feather icon-eye' : 'feather icon-eye-off'"></i>
              </div>
            </div>
            <div
              *ngIf="f['password'].invalid && f['password'].touched"
              class="error-message"
            >
              <small *ngIf="f['password'].errors?.['required']"
                >Password is required</small
              >
              <small *ngIf="f['password'].errors?.['minlength']"
                >Password must be at least 8 characters</small
              >
            </div>
          </div>

          <!-- Confirm Password Field -->
          <div class="form-group">
            <label for="confirmPassword" class="form-label">Confirm Password</label>
            <div class="input-group">
              <div class="input-icon">
                <i class="feather icon-lock"></i>
              </div>
              <input
                [type]="showConfirmPassword ? 'text' : 'password'"
                id="confirmPassword"
                formControlName="confirmPassword"
                autocomplete="new-password"
                class="form-control modern-input"
                placeholder="Confirm new password"
              />
              <div class="input-icon-right" (click)="toggleConfirmPasswordVisibility()">
                <i [class]="showConfirmPassword ? 'feather icon-eye' : 'feather icon-eye-off'"></i>
              </div>
            </div>
            <div
              *ngIf="f['confirmPassword'].invalid && f['confirmPassword'].touched"
              class="error-message"
            >
              <small *ngIf="f['confirmPassword'].errors?.['required']"
                >Please confirm your password</small
              >
              <small *ngIf="f['confirmPassword'].errors?.['passwordMismatch']"
                >Passwords do not match</small
              >
            </div>
          </div>

          <!-- Password Requirements -->
          <div class="password-requirements">
            <p class="requirements-title">Password Requirements:</p>
            <ul class="requirements-list">
              <li [class.valid]="f['password'].value && f['password'].value.length >= 8">
                <i class="feather icon-check"></i>
                At least 8 characters
              </li>
              <li [class.valid]="hasUppercase()">
                <i class="feather icon-check"></i>
                One uppercase letter
              </li>
              <li [class.valid]="hasLowercase()">
                <i class="feather icon-check"></i>
                One lowercase letter
              </li>
              <li [class.valid]="hasNumber()">
                <i class="feather icon-check"></i>
                One number
              </li>
            </ul>
          </div>

          <!-- Error Message -->
          <div *ngIf="error" class="alert alert-danger modern-alert">
            {{ error }}
          </div>

          <!-- Reset Button -->
          <button
            type="submit"
            class="btn btn-primary modern-btn"
            [disabled]="loading || resetPasswordForm.invalid"
          >
            <span
              *ngIf="loading"
              class="spinner-border spinner-border-sm me-2"
            ></span>
            {{ loading ? "Resetting..." : "Reset Password" }}
          </button>
        </form>

        <!-- Success Message -->
        <div *ngIf="success" class="success-section">
          <div class="success-icon">
            <i class="feather icon-check-circle"></i>
          </div>
          <h2 class="success-title">Password Reset Successfully!</h2>
          <p class="success-description">
            Your password has been updated successfully. You can now log in with your new password.
          </p>

          <button
            type="button"
            class="btn btn-primary modern-btn"
            (click)="goToLogin()"
          >
            Go to Login
          </button>
        </div>
      </div>
    </div>

    <!-- Right Card - Promotional Section -->
    <div class="promo-card">
      <div class="promo-content">
        <!-- Headline -->
        <h2 class="promo-title">
          Secure Your Account
        </h2>
        <p class="promo-subtitle">
          Choose a strong password to keep your account safe
        </p>

        <!-- Security Tips -->
        <div class="security-tips">
          <div class="tip-item">
            <div class="tip-icon">
              <i class="feather icon-shield"></i>
            </div>
            <div class="tip-text">
              <h4>Use a Strong Password</h4>
              <p>Include uppercase, lowercase, numbers, and special characters.</p>
            </div>
          </div>

          <div class="tip-item">
            <div class="tip-icon">
              <i class="feather icon-user-x"></i>
            </div>
            <div class="tip-text">
              <h4>Make it Unique</h4>
              <p>Don't reuse passwords from other accounts or services.</p>
            </div>
          </div>

          <div class="tip-item">
            <div class="tip-icon">
              <i class="feather icon-lock"></i>
            </div>
            <div class="tip-text">
              <h4>Keep it Private</h4>
              <p>Never share your password with anyone or write it down.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
